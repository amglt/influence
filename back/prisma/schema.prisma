// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Account {
  id            Int                      @id @default(autoincrement())
  name          String                   @unique
  userId        String
  characters    Character[]
}

model Character {
  id                      Int            @id @default(autoincrement())
  name                    String         @unique
  class                   String
  rank                    String
  account                 Account        @relation(fields: [accountId], references: [id])
  accountId               Int
  recruitmentDate         DateTime
}

model Period {
  id                      Int            @id @default(autoincrement())
  startDate               DateTime
  endDate                 DateTime?
  pvpGames                PvpGame[]
  playersPeriods          PlayerPeriod[]
}

model Scale {
  id                        Int            @id @default(autoincrement())
  percoAttackWinPoints      Float
  percoAttackLoosePoints    Float
  percoDefWinPoints         Float
  percoDefLoosePoints       Float
  percoNDPoints             Float
  prismAttackWinPoints      Float
  prismAttackLoosePoints    Float
  prismDefWinPoints         Float
  prismDefLoosePoints       Float
  prismNDPoints             Float
  bigPercoAttackWinPoints   Float
  bigPercoAttackLoosePoints Float
  bigPercoDefWinPoints      Float
  bigPercoDefLoosePoints    Float
  bigPercoNDPoints          Float
  bigPrismAttackWinPoints   Float
  bigPrismAttackLoosePoints Float
  bigPrismNDPoints          Float
  bigPrismDefWinPoints      Float
  bigPrismDefLoosePoints    Float
  avaWin                    Float
  avaLoose                  Float
}

model PvpGame {
  id                      Int            @id @default(autoincrement())
  result                  Int
  type                    Int
  status                  Int
  player1                 String
  player1Name             String         @default("")
  player2                 String?
  player2Name             String?
  player3                 String?
  player3Name             String?
  player4                 String?
  player4Name             String?
  player5                 String?
  player5Name             String?
  period                  Period         @relation(fields: [periodId], references: [id])
  periodId                Int
  screenshotUrl           String
  timestamp               DateTime
  bigOpponent             Boolean        @default(false)
  gamePoints              Float
  requester               String
}

model PlayerPeriod {
  playerId                String
  periodId                Int
  period                  Period         @relation(fields: [periodId], references: [id])
  totalPoints             Float
  @@id([playerId, periodId])
}